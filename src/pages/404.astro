---
import MatrixLayout from "../layouts/MatrixLayout.astro";
---

<MatrixLayout title="üòµ‚Äçüí´ 404 - P√°gina perdida en el multiverso">
  <div
    class="h-full w-screen text-white selection:text-white selection:bg-lime-500"
  >
    <canvas
      id="matrixCanvas"
      class="bg-green-950 fixed top-0 left-0 w-full h-full"></canvas>
    <div
      id="parallaxContainer"
      class="relative grid place-items-center h-full p-2 sm:p-10 md:p-20 space-y-10 text-center transform-3d"
    >
      <div class="parallax-layer" data-speed="0.5">
        <h1 class="text-7xl font-bold mt-5 md:mt-10">404</h1>
      </div>
      <div class="parallax-layer" data-speed="0.3">
        <p class="text-xl font-mono text-balance">
          Parece que has roto internet. O al menos esta peque√±a esquina de mi
          web.
        </p>
      </div>
      <div
        class="parallax-layer [perspective:200px] transform-3d"
        data-speed="0.8"
      >
        <a
          href="/"
          class="text-black bg-white px-6 py-2 border rounded-full transition select-none"
        >
          Volver al inicio
        </a>
      </div>
      <div class="parallax-layer" data-speed="0.15">
        <p class="text-xl font-mono text-balance">
          La p√°gina que buscas ha desaparecido, ha sido movida, o simplemente
          nunca existi√≥. Como tus ganas de leer los T√©rminos y Condiciones.
        </p>
      </div>

      <div class="mt-8 space-y-4 parallax-layer" data-speed="0.25">
        <h2 class="text-3xl font-bold">¬øY ahora qu√©?</h2>
        <p class="text-lg font-mono text-balance">
          Puedes volver al inicio y fingir que esto nunca pas√≥.
        </p>
        <p class="text-lg font-mono text-balance">
          O puedes <a
            href="https://instagram.com/baumannzone"
            class="underline font-bold hover:text-purple-400 transition"
            >contactarme</a
          > si crees que esto es un error, una conspiraci√≥n o un mensaje del m√°s
          all√°.
        </p>
        <p class="text-lg font-mono text-balance">
          Tambi√©n puedes quedarte aqu√≠ y contemplar la matrix. No te juzgar√©.
        </p>
      </div>
    </div>
  </div>

  <script type="module" src="/src/utils/matrix.js"></script>
  <!-- Efecto parallax -->
  <script>
    document.addEventListener("DOMContentLoaded", () => {
      const MOUSE_SENSITIVITY = 25; // Divisor para la sensibilidad del mouse
      const ROTATION_FACTOR = 2; // Factor de rotaci√≥n 3D

      const container = document.getElementById(
        "parallaxContainer",
      ) as HTMLElement;
      const layers = document.querySelectorAll<HTMLElement>(".parallax-layer");

      let mouseX = 0;
      let mouseY = 0;
      let containerRect = container.getBoundingClientRect();

      function updateParallax(e) {
        mouseX =
          (e.clientX - containerRect.left - containerRect.width / 2) /
          MOUSE_SENSITIVITY;
        mouseY =
          (e.clientY - containerRect.top - containerRect.height / 2) /
          MOUSE_SENSITIVITY;

        layers.forEach((layer) => {
          const speed = parseFloat(layer.dataset.speed || "0");
          const x = mouseX * speed;
          const y = mouseY * speed;
          const rotateX = -y * ROTATION_FACTOR;
          const rotateY = x * ROTATION_FACTOR;

          layer.style.transform = `translate3d(${x}px, ${y}px, 0) rotateX(${rotateX}deg) rotateY(${rotateY}deg)`;
        });
      }

      container.addEventListener("mousemove", updateParallax);

      container.addEventListener("mouseleave", () => {
        layers.forEach((layer) => {
          layer.style.transform =
            "translate3d(0, 0, 0) rotateX(0deg) rotateY(0deg)";
        });
      });

      window.addEventListener("resize", () => {
        containerRect = container.getBoundingClientRect();
      });
    });
  </script>
</MatrixLayout>
